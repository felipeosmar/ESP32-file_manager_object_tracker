; PlatformIO Project Configuration File
; ESP32 Object Tracker

[env:esp32cam]
platform = espressif32
board = esp32cam
framework = arduino

; Serial Monitor
monitor_speed = 115200
monitor_filters = esp32_exception_decoder

; Build flags
build_flags =
    -DCORE_DEBUG_LEVEL=3
    -DBOARD_HAS_PSRAM
    -mfix-esp32-psram-cache-issue
    -fpermissive
    -Wno-deprecated-declarations
    ; Async TCP/WebServer optimizations
    -DCONFIG_ASYNC_TCP_RUNNING_CORE=1
    -DCONFIG_ASYNC_TCP_USE_WDT=0
    ; Increase web server buffer for large files
    -DWEBSERVER_MAX_CONTENT_SIZE=8192

; Library dependencies
lib_deps =
    https://github.com/ESP32Async/ESPAsyncWebServer.git
    https://github.com/dvarrel/AsyncTCP
    bblanchon/ArduinoJson@^7.0.4

; Upload settings
upload_speed = 921600

; Partition scheme for OTA support
; Changed from huge_app.csv to min_spiffs.csv to enable OTA updates
; Layout: Factory app + 2x OTA partitions (ota_0 and ota_1) + SPIFFS
; - app0 (ota_0): 1.9MB - First OTA partition
; - app1 (ota_1): 1.9MB - Second OTA partition
; - spiffs: 190KB - File system storage
; This enables over-the-air firmware updates with automatic rollback protection
board_build.partitions = min_spiffs.csv

; Flash settings
board_build.flash_mode = dio
board_build.f_flash = 80000000L
board_build.f_cpu = 240000000L
